
<!doctype html>
<html lang="zh-CN">
<head>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta charset="UTF-8">

    
    <link rel="stylesheet" type="text/css" href="https://cdn.staticfile.org/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../../../static/css/portal.min.css" />
    <style>
        body {
            padding: 15px;
        }
    </style>
</head>

<body>

    <form class="small" data-target="">
        <table class="table table-bordered table-sm mb-4">
            <col width="30%"/>
            <col width="35%"/>
            <col width="35%"/>
            <thead>
            <tr>
                <th class="align-middle text-center">属性名称</th>
                <th class="align-middle text-center">数据内容</th>
                <th class="align-middle text-center">单位</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="align-middle">血钾（K+）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="k" name="k" type="text" value=""></td>
                <td class="align-middle"><select class="form-control form-control-sm" id="k_unit" name="k_unit"><option value="mmol/L">mmol/L</option></select></td>
            </tr>
            <tr>
                <td class="align-middle">阴离子间隙（AG）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="ag" name="ag" type="text" value=""></td>
                <td class="align-middle"><select class="form-control form-control-sm" id="ag_unit" name="ag_unit"><option value="mmol/L">mmol/L</option></select></td>
            </tr>
            <tr>
                <td class="align-middle">标准碳酸氢根（SBC）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="sbc" name="sbc" type="text" value=""></td>
                <td class="align-middle"><select class="form-control form-control-sm" id="sbc_unit" name="sbc_unit"><option value="mmol/L">mmol/L</option></select></td>
            </tr>
            <tr>
                <td class="align-middle">细胞外液剩余碱（BEecf）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="beecf" name="beecf" type="text" value=""></td>
                <td class="align-middle"><select class="form-control form-control-sm" id="beecf_unit" name="beecf_unit"><option value="mmol/L">mmol/L</option></select></td>
            </tr>
            <tr>
                <td class="align-middle">全血剩余碱（BEb）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="beb" name="beb" type="text" value=""></td>
                <td class="align-middle"><select class="form-control form-control-sm" id="beb_unit" name="beb_unit"><option value="mmol/L">mmol/L</option></select></td>
            </tr>
            <tr>
                <td class="align-middle">二氧化碳总量（TCO2）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="tco2" name="tco2" type="text" value=""></td>
                <td class="align-middle"><select class="form-control form-control-sm" id="tco2_unit" name="tco2_unit"><option value="mmol/L">mmol/L</option></select></td>
            </tr>
            <tr>
                <td class="align-middle">实际碳酸氢盐（HCO3）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="hco3" name="hco3" type="text" value=""></td>
                <td class="align-middle"><select class="form-control form-control-sm" id="hco3_unit" name="hco3_unit"><option value="mmol/L">mmol/L</option></select></td>
            </tr>
            <tr>
                <td class="align-middle">二氧化碳分压（PCO2）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="pco2" name="pco2" type="text" value=""></td>
                <td class="align-middle"><select class="form-control form-control-sm" id="pco2_unit" name="pco2_unit"><option value="mmHg">mmHg</option></select></td>
            </tr>
            <tr>
                <td class="align-middle">氧分压（PO2）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="po2" name="po2" type="text" value=""></td>
                <td class="align-middle"><select class="form-control form-control-sm" id="po2_unit" name="po2_unit"><option value="mmHg">mmHg</option></select></td>
            </tr>
            <tr>
                <td class="align-middle">酸碱度（PH）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="ph" name="ph" type="text" value=""></td>
                <td class="align-middle"></td>
            </tr>
            <tr>
                <td class="align-middle">血氯化物（Cl-）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="cl" name="cl" type="text" value=""></td>
                <td class="align-middle"><select class="form-control form-control-sm" id="cl_unit" name="cl_unit"><option value="mmol/L">mmol/L</option></select></td>
            </tr>
            <tr>
                <td class="align-middle">血钠（Na+）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="na" name="na" type="text" value=""></td>
                <td class="align-middle"><select class="form-control form-control-sm" id="na_unit" name="na_unit"><option value="mmol/L">mmol/L</option></select></td>
            </tr>
            <tr>
                <td class="align-middle">氧饱和度（SO2C）</td>
                <td class="align-middle"><input class="form-control form-control-sm" id="so2c" name="so2c" type="text" value=""></td>
                <td class="align-middle"></td>
            </tr>
            </tbody>
        </table>

        <input class="btn btn-sm btn-primary btn-block layer-button" id="submit" name="submit" type="button" value="提交">
    </form>



<script type="text/javascript" src="https://cdn.staticfile.org/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="/static/plugins/layer-3.1.1/layer.js"></script>
<script>
    function setFormTarget(target) {
        $('form').data('target', target);
    }
</script>


    <script>
        $('#submit').on('click', function () {
            var index = parent.layer.getFrameIndex(window.name);
            var target = $('form').data('target');
            var content = '';
            var items = [];
            $('tbody tr').each(function () {
                var value = $(this).find("td:eq(1)").find(':input').val();
                if (value) {
                    var name = $(this).find("td:eq(0)").text();
                    var unit = $(this).find("td:eq(2)").find(":input").val() || '';
                    if ($.inArray(unit, ['10^9/L', '10^12/L']) >= 0) {
                        unit = '*' + unit;
                    }
                    var item = name + '：' + value + unit;
                    items.push(item);

                    if ($(this)[0] === $('tbody tr').last()[0]) {
                        content += '。';
                    } else {
                        content += '，';
                    }
                }
            });

            content = items.join('，');

            if (content) {
                content = parent.$('.layui-layer-title').text() + '\n' + content + '。';
                var content_old = parent.$('#' + target).val();
                if (content_old) {
                    content = content_old + '\n' + content;
                }
            }

            parent.$('#' + target).val(content);
            parent.layer.close(index);
        });
    </script>

</body>
</html>